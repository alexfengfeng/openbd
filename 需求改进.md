# éœ€æ±‚æ”¹è¿›æ–¹æ¡ˆ

> åŸºäº fast-json é¡¹ç›®çš„æ·±åº¦åˆ†æï¼Œåˆ¶å®šå¿«é€Ÿç©ºé—´åˆ‡æ¢ + AI æ™ºèƒ½éœ€æ±‚ç®¡ç†çš„å®Œæ•´å®æ–½è·¯çº¿å›¾

## ä¸€ã€å½“å‰ä»£ç æ¶æ„åˆ†æ

### 1.1 æŠ€æœ¯æ ˆ

| åˆ†ç±» | æŠ€æœ¯ |
|------|------|
| å‰ç«¯æ¡†æ¶ | Next.js 15.1.11 (App Router) + React 19 |
| UI ç»„ä»¶ | Radix UI + Tailwind CSS + shadcn/ui |
| çŠ¶æ€ç®¡ç† | React Query (@tanstack/react-query 5.62.11) |
| æ•°æ®åº“ | Prisma ORM + MySQL |
| è®¤è¯ | JWT (jose) |
| è¡¨å•å¤„ç† | React Hook Form + Zod |

### 1.2 æ ¸å¿ƒé—®é¢˜è¯†åˆ«

#### é—®é¢˜ 1ï¼šæ— å·¥ä½œç©ºé—´åˆ‡æ¢åŠŸèƒ½
- **ç°çŠ¶**ï¼šç¡¬ç¼–ç é€‰æ‹©ç¬¬ä¸€ä¸ªå·¥ä½œç©ºé—´
- **å½±å“**ï¼šåˆ‡æ¢ç©ºé—´éœ€è¦è¿”å›åˆ—è¡¨é¡µï¼Œè€—æ—¶ > 5 ç§’
- **æ–‡ä»¶**ï¼š`src/app/(dashboard)/layout.tsx:50-52`

```typescript
// å½“å‰ç¡¬ç¼–ç é€»è¾‘
if (data.workspaces.length > 0) {
  setCurrentWorkspace(data.workspaces[0]); // æ€»æ˜¯é€‰ç¬¬ä¸€ä¸ª
}
```

#### é—®é¢˜ 2ï¼šAI åŠŸèƒ½ç®€é™‹
- **ç°çŠ¶**ï¼šä»…ä½¿ç”¨å…³é”®è¯åŒ¹é…ï¼Œæ— çœŸå® AI é›†æˆ
- **å½±å“**ï¼šæ™ºèƒ½åº¦ä½ï¼Œéœ€è¦å¤§é‡æ‰‹åŠ¨è¾“å…¥
- **æ–‡ä»¶**ï¼š`src/app/api/ai/parse-requirement/route.ts:31-81`

```typescript
// å½“å‰ä»…å…³é”®è¯åŒ¹é…
const priorityKeywords: Record<string, Priority> = {
  'urg': 'URGENT',
  'ç´§æ€¥': 'URGENT',
  // ...
};
```

#### é—®é¢˜ 3ï¼šçœ‹æ¿æ— æ‹–æ‹½åŠŸèƒ½
- **ç°çŠ¶**ï¼šé™æ€å±•ç¤ºï¼Œç¡¬ç¼–ç "æ‹–æ‹½éœ€æ±‚åˆ°è¿™é‡Œ"æ–‡æœ¬ä½†æ— å®ç°
- **å½±å“**ï¼šçŠ¶æ€æ›´æ–°éœ€è¦æ‰“å¼€è¯¦æƒ…é¡µï¼Œè€—æ—¶çº¦ 5 ç§’
- **æ–‡ä»¶**ï¼š`src/components/requirements/RequirementBoard.tsx:75-112`

#### é—®é¢˜ 4ï¼šæ— å¿«é€Ÿç¼–è¾‘åŠŸèƒ½
- **ç°çŠ¶**ï¼šéœ€æ±‚åˆ›å»ºåæ— æ³•ç¼–è¾‘ï¼Œæ— ç¼–è¾‘å¯¹è¯æ¡†
- **å½±å“**ï¼šä»»ä½•ä¿®æ”¹éƒ½éœ€è¦è·³è½¬é¡µé¢

#### é—®é¢˜ 5ï¼šæ— å¿«æ·é”®æ”¯æŒ
- **ç°çŠ¶**ï¼šå…¨é¼ æ ‡æ“ä½œï¼Œæ— é”®ç›˜å·¥ä½œæµ
- **å½±å“**ï¼šæ•ˆç‡ä½ä¸‹

### 1.3 æ•°æ®æ¨¡å‹

```prisma
// æ ¸å¿ƒæ¨¡å‹ï¼ˆprisma/schema.prismaï¼‰
model User {
  id           String   @id @default(uuid())
  username     String   @unique
  passwordHash String
  // ...
}

model Workspace {
  id        String   @id @default(uuid())
  name      String
  slug      String   @unique
  ownerId   String
  // ç¼ºå°‘: lastVisitedAt å­—æ®µï¼ˆç”¨äºæœ€è¿‘ä½¿ç”¨æ’åºï¼‰
}

model Requirement {
  id          String
  workspaceId String
  title       String
  description String?
  status      RequirementStatus   // BACKLOG, TODO, IN_PROGRESS, DONE
  priority    RequirementPriority // LOW, MEDIUM, HIGH, URGENT
  assigneeId  String?
  // ç¼ºå°‘: order å­—æ®µï¼ˆç”¨äºæ’åºï¼‰
}
```

---

## äºŒã€æŠ€æœ¯é€‰å‹å†³ç­–

### 2.1 æ–°å¢ä¾èµ–

```bash
# çŠ¶æ€ç®¡ç†
pnpm add zustand

# æ‹–æ‹½åŠŸèƒ½
pnpm add @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities

# AI é›†æˆ (ä½¿ç”¨ DeepSeek APIï¼Œå…¼å®¹ OpenAI SDK)
pnpm add openai

# å¿«æ·é”®
pnpm add react-hotkeys-hook

# å‘½ä»¤é¢æ¿
pnpm add cmdk
```

### 2.2 æŠ€æœ¯é€‰å‹å¯¹æ¯”

#### æ‹–æ‹½åº“é€‰æ‹©ï¼š@dnd-kit

| ç‰¹æ€§ | @dnd-kit | react-beautiful-dnd |
|------|----------|---------------------|
| ç»´æŠ¤çŠ¶æ€ | âœ… æ´»è·ƒç»´æŠ¤ | âŒ å·²å½’æ¡£ |
| React 19 | âœ… å®Œå…¨å…¼å®¹ | âš ï¸ éœ€è¦å…¼å®¹å±‚ |
| æ€§èƒ½ | âœ… ä¼˜åŒ–æ›´å¥½ | âš ï¸ å¤§åˆ—è¡¨å¡é¡¿ |
| TypeScript | âœ… åŸç”Ÿæ”¯æŒ | âš ï¸ ç±»å‹å®šä¹‰ä¸å®Œæ•´ |

#### çŠ¶æ€ç®¡ç†é€‰æ‹©ï¼šZustand

| ç‰¹æ€§ | Zustand | React Context | Jotai |
|------|---------|---------------|-------|
| åŒ…å¤§å° | âœ… 1KB | âŒ è¾ƒå¤§ | âœ… 3KB |
| æ— éœ€ Provider | âœ… æ˜¯ | âŒ å¦ | âœ… æ˜¯ |
| æŒä¹…åŒ– | âœ… å†…ç½® | âŒ éœ€è‡ªè¡Œå®ç° | âœ… æ”¯æŒ |
| å­¦ä¹ æ›²çº¿ | âœ… ç®€å• | âš ï¸ ä¸­ç­‰ | âš ï¸ ä¸­ç­‰ |

---

## ä¸‰ã€è¯¦ç»†å®æ–½æ–¹æ¡ˆ

### 3.1 å·¥ä½œç©ºé—´å¿«é€Ÿåˆ‡æ¢

#### æ¶æ„è®¾è®¡

```
ç”¨æˆ·æ“ä½œ â†’ WorkspaceSwitcher ç»„ä»¶
    â†“
useWorkspaceStore (Zustand)
    â†“
â”œâ”€ æœ¬åœ°çŠ¶æ€æ›´æ–° (React)
â”œâ”€ localStorage æŒä¹…åŒ–
â””â”€ API è°ƒç”¨ (/api/workspaces/[id]/visit)
    â†“
è·¯ç”±æ›´æ–° (router.push)
    â†“
é¡µé¢é‡æ–°æ¸²æŸ“
```

#### æ–°å¢æ–‡ä»¶

**æ–‡ä»¶ï¼š`src/stores/workspaceStore.ts`**

```typescript
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface Workspace {
  id: string;
  name: string;
  slug: string;
  _count?: {
    requirements: number;
    members: number;
  };
}

interface WorkspaceState {
  workspaces: Workspace[];
  currentWorkspace: Workspace | null;
  recentWorkspaces: string[];
  isLoading: boolean;

  setWorkspaces: (workspaces: Workspace[]) => void;
  setCurrentWorkspace: (workspace: Workspace) => void;
  addToRecent: (workspaceId: string) => void;
  getRecentWorkspaces: () => Workspace[];
  switchWorkspace: (workspaceId: string) => Promise<void>;
}

export const useWorkspaceStore = create<WorkspaceState>()(
  persist(
    (set, get) => ({
      workspaces: [],
      currentWorkspace: null,
      recentWorkspaces: [],
      isLoading: false,

      setWorkspaces: (workspaces) => set({ workspaces }),

      setCurrentWorkspace: (workspace) => {
        set({ currentWorkspace: workspace });
        get().addToRecent(workspace.id);

        // æœåŠ¡å™¨åŒæ­¥
        fetch(`/api/workspaces/${workspace.id}/visit`, { method: 'POST' })
          .catch(console.error);
      },

      addToRecent: (workspaceId) => {
        const recent = get().recentWorkspaces.filter(id => id !== workspaceId);
        set({ recentWorkspaces: [workspaceId, ...recent].slice(0, 5) });
      },

      getRecentWorkspaces: () => {
        const { workspaces, recentWorkspaces } = get();
        return recentWorkspaces
          .map(id => workspaces.find(w => w.id === id))
          .filter(Boolean) as Workspace[];
      },

      switchWorkspace: async (workspaceId) => {
        const workspace = get().workspaces.find(w => w.id === workspaceId);
        if (workspace) {
          get().setCurrentWorkspace(workspace);
        }
      },
    }),
    {
      name: 'workspace-storage',
      partialize: (state) => ({
        recentWorkspaces: state.recentWorkspaces,
        currentWorkspace: state.currentWorkspace,
      }),
    }
  )
);
```

**æ–‡ä»¶ï¼š`src/components/workspaces/WorkspaceSwitcher.tsx`**

```typescript
'use client';

import { useState, useEffect } from 'react';
import { useRouter, usePathname } from 'next/navigation';
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from '@/components/ui/popover';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { FolderOpen, Search, Clock } from 'lucide-react';
import { useWorkspaceStore } from '@/stores/workspaceStore';
import { cn } from '@/lib/utils';

export function WorkspaceSwitcher() {
  const router = useRouter();
  const pathname = usePathname();
  const [isOpen, setIsOpen] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');

  const {
    workspaces,
    currentWorkspace,
    getRecentWorkspaces,
    switchWorkspace,
    setWorkspaces,
    setCurrentWorkspace,
  } = useWorkspaceStore();

  useEffect(() => {
    fetchWorkspaces();
  }, []);

  const fetchWorkspaces = async () => {
    try {
      const response = await fetch('/api/workspaces');
      if (response.ok) {
        const data = await response.json();
        setWorkspaces(data.workspaces);

        const workspaceId = pathname.match(/\/workspaces\/([^\/]+)/)?.[1];
        if (workspaceId) {
          const workspace = data.workspaces.find((w: any) => w.id === workspaceId);
          if (workspace) {
            setCurrentWorkspace(workspace);
          }
        }
      }
    } catch (error) {
      console.error('Error fetching workspaces:', error);
    }
  };

  const handleSwitch = async (workspaceId: string) => {
    await switchWorkspace(workspaceId);

    const newPath = pathname.replace(
      /\/workspaces\/[^\/]+/,
      `/workspaces/${workspaceId}`
    );

    router.push(newPath);
    setIsOpen(false);
  };

  const filteredWorkspaces = workspaces.filter(w =>
    w.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const recentWs = getRecentWorkspaces();

  return (
    <Popover open={isOpen} onOpenChange={setIsOpen}>
      <PopoverTrigger asChild>
        <Button
          variant="ghost"
          className="w-full justify-start gap-2 px-3 h-auto py-2"
        >
          <FolderOpen className="h-4 w-4 shrink-0" />
          <span className="truncate text-sm">
            {currentWorkspace?.name || 'é€‰æ‹©å·¥ä½œç©ºé—´'}
          </span>
        </Button>
      </PopoverTrigger>

      <PopoverContent className="w-[320px] p-0" align="start">
        <div className="p-3">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 opacity-50" />
            <Input
              placeholder="æœç´¢å·¥ä½œç©ºé—´..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-9"
            />
          </div>
        </div>

        {!searchQuery && recentWs.length > 0 && (
          <div className="px-3 pb-2">
            <div className="flex items-center gap-2 px-2 py-1.5 text-xs font-medium opacity-65">
              <Clock className="h-3 w-3" />
              æœ€è¿‘ä½¿ç”¨
            </div>
            {recentWs.map((workspace) => (
              <button
                key={workspace.id}
                onClick={() => handleSwitch(workspace.id)}
                className={cn(
                  "w-full flex items-center gap-2 px-2 py-2 rounded-lg text-sm",
                  "hover:bg-accent transition-colors",
                  currentWorkspace?.id === workspace.id && "bg-accent"
                )}
              >
                <FolderOpen className="h-4 w-4 shrink-0" />
                <span className="truncate flex-1 text-left">{workspace.name}</span>
                <span className="text-xs opacity-50">
                  {workspace._count?.requirements ?? 0}
                </span>
              </button>
            ))}
          </div>
        )}

        <div className="px-3 py-2 border-t">
          <div className="max-h-[200px] overflow-y-auto">
            {filteredWorkspaces.map((workspace) => (
              <button
                key={workspace.id}
                onClick={() => handleSwitch(workspace.id)}
                className={cn(
                  "w-full flex items-center gap-2 px-2 py-2 rounded-lg text-sm",
                  "hover:bg-accent transition-colors",
                  currentWorkspace?.id === workspace.id && "bg-accent"
                )}
              >
                <FolderOpen className="h-4 w-4 shrink-0" />
                <span className="truncate flex-1 text-left">{workspace.name}</span>
              </button>
            ))}
          </div>
        </div>

        <div className="p-3 border-t">
          <button
            onClick={() => {
              setIsOpen(false);
              router.push('/workspaces/new');
            }}
            className="w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-primary text-primary-foreground"
          >
            æ–°å»ºå·¥ä½œç©ºé—´
          </button>
        </div>
      </PopoverContent>
    </Popover>
  );
}
```

**æ–‡ä»¶ï¼š`src/app/api/workspaces/[id]/visit/route.ts`**

```typescript
import { NextRequest, NextResponse } from 'next/server';
import { getServerSession } from '@/lib/auth';
import { prisma } from '@/lib/prisma';

export async function POST(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const session = await getServerSession();
    if (!session) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { id } = await params;

    // éªŒè¯æƒé™
    const membership = await prisma.workspaceMember.findUnique({
      where: {
        workspaceId_userId: {
          workspaceId: id,
          userId: session.user.id,
        },
      },
    });

    if (!membership) {
      return NextResponse.json({ error: 'Forbidden' }, { status: 403 });
    }

    // æ›´æ–°æœ€åè®¿é—®æ—¶é—´
    await prisma.workspace.update({
      where: { id },
      data: { lastVisitedAt: new Date() },
    });

    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('Error updating visit time:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}
```

#### æ•°æ®åº“å˜æ›´

**æ–‡ä»¶ï¼š`prisma/schema.prisma`**

```prisma
model Workspace {
  // ... ç°æœ‰å­—æ®µ
  lastVisitedAt DateTime? @map("last_visited_at") // æ–°å¢

  @@map("workspaces")
  @@index([lastVisitedAt]) // æ–°å¢ç´¢å¼•
}
```

---

### 3.2 AI æ™ºèƒ½è§£æ

#### æ¶æ„è®¾è®¡

```
ç”¨æˆ·è¾“å…¥ â†’ AI è§£æ API
    â†“
æ£€æŸ¥ç¼“å­˜
    â†“
â”œâ”€ å‘½ä¸­ â†’ è¿”å›ç¼“å­˜ç»“æœ
â””â”€ æœªå‘½ä¸­ â†’ DeepSeek API (å…¼å®¹ OpenAI SDK)
            â†“
         ç¼“å­˜ç»“æœ
            â†“
         è¿”å›ç»“æ„åŒ–æ•°æ®
```

#### æ ¸å¿ƒæ–‡ä»¶

**æ–‡ä»¶ï¼š`src/lib/ai/deepseek-client.ts`**

```typescript
import OpenAI from 'openai';

// DeepSeek API å…¼å®¹ OpenAI SDK
export class DeepSeekClient {
  private client: OpenAI;

  constructor(apiKey: string) {
    this.client = new OpenAI({
      apiKey,
      baseURL: 'https://api.deepseek.com', // DeepSeek API endpoint
    });
  }

  async parseRequirement(prompt: string) {
    const completion = await this.client.chat.completions.create({
      model: 'deepseek-chat', // DeepSeek æ¨¡å‹
      messages: [
        {
          role: 'system',
          content: `ä½ æ˜¯éœ€æ±‚åˆ†æåŠ©æ‰‹ã€‚ä»ç”¨æˆ·è¾“å…¥ä¸­æå–ï¼š
{
  "title": "ç®€æ´æ ‡é¢˜ï¼ˆä¸è¶…è¿‡50å­—ï¼‰",
  "description": "è¯¦ç»†æè¿°",
  "priority": "URGENT/HIGH/MEDIUM/LOW",
  "status": "BACKLOG/TODO/IN_PROGRESS",
  "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"]
}`
        },
        { role: 'user', content: prompt }
      ],
      response_format: { type: 'json_object' }
    });

    return JSON.parse(completion.choices[0].message.content || '{}');
  }

  async suggestTitle(description: string): Promise<string> {
    const completion = await this.client.chat.completions.create({
      model: 'deepseek-chat',
      messages: [
        {
          role: 'system',
          content: 'æ ¹æ®æè¿°ç”Ÿæˆç®€æ´çš„éœ€æ±‚æ ‡é¢˜ï¼ˆä¸è¶…è¿‡50å­—ï¼‰'
        },
        { role: 'user', content: description }
      ]
    });

    return completion.choices[0].message.content || '';
  }

  // æ‰¹é‡ä»æ–‡æ¡£æå–éœ€æ±‚
  async extractRequirementsFromDocument(content: string) {
    const completion = await this.client.chat.completions.create({
      model: 'deepseek-chat',
      messages: [
        {
          role: 'system',
          content: `ä»æ–‡æ¡£ä¸­æå–æ‰€æœ‰éœ€æ±‚ï¼Œè¿”å›JSONæ•°ç»„ï¼š
[
  {
    "title": "éœ€æ±‚æ ‡é¢˜",
    "description": "éœ€æ±‚æè¿°",
    "priority": "HIGH/MEDIUM/LOW"
  }
]`
        },
        { role: 'user', content: content.slice(0, 12000) }
      ],
      response_format: { type: 'json_object' }
    });

    return JSON.parse(completion.choices[0].message.content || '{}');
  }
}
```

**æ–‡ä»¶ï¼š`src/app/api/ai/parse-requirement/route.ts`ï¼ˆé‡å†™ï¼‰**

```typescript
import { NextRequest, NextResponse } from 'next/server';
import { DeepSeekClient } from '@/lib/ai/deepseek-client';

const deepseekClient = new DeepSeekClient(process.env.DEEPSEEK_API_KEY!);

export async function POST(request: NextRequest) {
  try {
    const { prompt } = await request.json();

    if (!prompt || prompt.length > 5000) {
      return NextResponse.json(
        { error: 'Invalid input' },
        { status: 400 }
      );
    }

    const parsed = await deepseekClient.parseRequirement(prompt);

    return NextResponse.json({ parsed });
  } catch (error) {
    console.error('AI parse error:', error);
    return NextResponse.json(
      { error: 'Failed to parse requirement' },
      { status: 500 }
    );
  }
}
```

**æ–‡ä»¶ï¼š`.env.local`**

```bash
# æ–°å¢ç¯å¢ƒå˜é‡ (DeepSeek API)
DEEPSEEK_API_KEY=sk-your-deepseek-api-key

# è·å– API Key: https://platform.deepseek.com/api_keys
```

---

### 3.3 çœ‹æ¿æ‹–æ‹½åŠŸèƒ½

#### æ ¸å¿ƒç»„ä»¶

**æ–‡ä»¶ï¼š`src/components/requirements/DraggableBoard.tsx`**

```typescript
'use client';

import { useState } from 'react';
import {
  DndContext,
  DragEndEvent,
  DragOverlay,
  DragStartEvent,
  PointerSensor,
  useSensor,
  useSensors,
} from '@dnd-kit/core';
import { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';
import { RequirementCard } from './RequirementCard';
import { DraggableRequirementCard } from './DraggableRequirementCard';
import { updateRequirementStatus } from '@/lib/api/requirements';

const STATUS_COLUMNS = [
  { key: 'BACKLOG', label: 'å¾…åŠ' },
  { key: 'TODO', label: 'å¾…å¤„ç†' },
  { key: 'IN_PROGRESS', label: 'è¿›è¡Œä¸­' },
  { key: 'DONE', label: 'å·²å®Œæˆ' },
];

export function DraggableBoard({ workspaceId, requirements }: Props) {
  const [activeId, setActiveId] = useState<string | null>(null);
  const [activeRequirement, setActiveRequirement] = useState<Requirement | null>(null);

  const sensors = useSensors(
    useSensor(PointerSensor, {
      activationConstraint: {
        distance: 8,
      },
    })
  );

  // æŒ‰çŠ¶æ€åˆ†ç»„éœ€æ±‚
  const columns = STATUS_COLUMNS.map(column => ({
    ...column,
    requirements: requirements.filter(r => r.status === column.key),
  }));

  const handleDragStart = (event: DragStartEvent) => {
    const { active } = event;
    setActiveId(active.id as string);

    const req = requirements.find(r => r.id === active.id);
    if (req) setActiveRequirement(req);
  };

  const handleDragEnd = async (event: DragEndEvent) => {
    const { active, over } = event;
    setActiveId(null);
    setActiveRequirement(null);

    if (!over) return;

    const activeId = active.id as string;
    const overId = over.id as string;

    // æ‰¾åˆ°ç›®æ ‡åˆ—
    const targetColumn = columns.find(col =>
      col.requirements.some(r => r.id === overId) || col.key === overId
    );

    if (!targetColumn) return;

    // æ›´æ–°çŠ¶æ€
    await updateRequirementStatus(activeId, targetColumn.key);
  };

  return (
    <DndContext
      sensors={sensors}
      onDragStart={handleDragStart}
      onDragEnd={handleDragEnd}
    >
      <div className="flex gap-4 h-full overflow-x-auto pb-4">
        {columns.map(column => (
          <div
            key={column.key}
            className="flex-shrink-0 w-80 bg-muted/30 rounded-lg p-4"
          >
            <div className="flex items-center justify-between mb-4">
              <h3 className="font-semibold">{column.label}</h3>
              <span className="text-sm text-muted-foreground">
                {column.requirements.length}
              </span>
            </div>

            <SortableContext
              items={column.requirements.map(r => r.id)}
              strategy={verticalListSortingStrategy}
            >
              <div className="space-y-3">
                {column.requirements.map(req => (
                  <DraggableRequirementCard
                    key={req.id}
                    requirement={req}
                  />
                ))}
              </div>
            </SortableContext>
          </div>
        ))}
      </div>

      <DragOverlay>
        {activeRequirement ? (
          <div className="rotate-3 opacity-90">
            <RequirementCard requirement={activeRequirement} />
          </div>
        ) : null}
      </DragOverlay>
    </DndContext>
  );
}
```

**æ–‡ä»¶ï¼š`src/components/requirements/DraggableRequirementCard.tsx`**

```typescript
'use client';

import { useSortable } from '@dnd-kit/core';
import { CSS } from '@dnd-kit/utilities';
import { RequirementCard } from './RequirementCard';

export function DraggableRequirementCard({ requirement }: Props) {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({
    id: requirement.id,
  });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
    opacity: isDragging ? 0.5 : 1,
  };

  return (
    <div
      ref={setNodeRef}
      style={style}
      {...attributes}
      {...listeners}
      className="cursor-grab active:cursor-grabbing"
    >
      <RequirementCard requirement={requirement} />
    </div>
  );
}
```

---

### 3.4 å‘½ä»¤é¢æ¿ (Cmd+K)

**æ–‡ä»¶ï¼š`src/components/command/CommandPalette.tsx`**

```typescript
'use client';

import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import {
  CommandDialog,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  CommandList,
} from 'cmdk';
import { Search, FolderOpen, Plus, Settings } from 'lucide-react';
import { useWorkspaceStore } from '@/stores/workspaceStore';

export function CommandPalette() {
  const router = useRouter();
  const [open, setOpen] = useState(false);
  const [search, setSearch] = useState('');

  const { workspaces, currentWorkspace, switchWorkspace } = useWorkspaceStore();

  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
        e.preventDefault();
        setOpen(prev => !prev);
      }
    };

    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, []);

  const filteredWorkspaces = workspaces.filter(w =>
    w.name.toLowerCase().includes(search.toLowerCase())
  );

  return (
    <CommandDialog open={open} onOpenChange={setOpen}>
      <CommandInput
        placeholder="æœç´¢å·¥ä½œç©ºé—´ã€éœ€æ±‚..."
        value={search}
        onValueChange={setSearch}
      />
      <CommandList>
        <CommandEmpty>æ— ç»“æœ</CommandEmpty>

        {/* å·¥ä½œç©ºé—´ */}
        {filteredWorkspaces.length > 0 && (
          <CommandGroup heading="å·¥ä½œç©ºé—´">
            {filteredWorkspaces.map(ws => (
              <CommandItem
                key={ws.id}
                onSelect={async () => {
                  await switchWorkspace(ws.id);
                  setOpen(false);
                }}
              >
                <FolderOpen className="mr-2 h-4 w-4" />
                {ws.name}
                {ws.id === currentWorkspace?.id && <span className="ml-auto text-xs">å½“å‰</span>}
              </CommandItem>
            ))}
          </CommandGroup>
        )}

        {/* å¿«é€Ÿæ“ä½œ */}
        <CommandGroup heading="å¿«é€Ÿæ“ä½œ">
          <CommandItem onSelect={() => { router.push('/workspaces/new'); setOpen(false); }}>
            <Plus className="mr-2 h-4 w-4" />
            åˆ›å»ºå·¥ä½œç©ºé—´
          </CommandItem>
          <CommandItem onSelect={() => { router.push('/settings'); setOpen(false); }}>
            <Settings className="mr-2 h-4 w-4" />
            è®¾ç½®
          </CommandItem>
        </CommandGroup>
      </CommandList>
    </CommandDialog>
  );
}
```

---

### 3.5 å¿«é€Ÿç¼–è¾‘å¯¹è¯æ¡†

**æ–‡ä»¶ï¼š`src/components/requirements/QuickEditDialog.tsx`**

```typescript
'use client';

import { useState } from 'react';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Button } from '@/components/ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Sparkles } from 'lucide-react';

export function QuickEditDialog({ requirement, open, onOpenChange, onSave }: Props) {
  const [title, setTitle] = useState(requirement.title);
  const [description, setDescription] = useState(requirement.description || '');
  const [status, setStatus] = useState(requirement.status);
  const [priority, setPriority] = useState(requirement.priority);
  const [loading, setLoading] = useState(false);

  const handleAIImprove = async () => {
    try {
      const response = await fetch('/api/ai/suggest-title', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ description }),
      });
      const data = await response.json();
      setTitle(data.title);
    } catch (error) {
      console.error('AI improve failed:', error);
    }
  };

  const handleSave = async () => {
    setLoading(true);
    try {
      await onSave({ title, description, status, priority });
      onOpenChange(false);
    } finally {
      setLoading(false);
    }
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="max-w-2xl">
        <DialogHeader>
          <DialogTitle>å¿«é€Ÿç¼–è¾‘éœ€æ±‚</DialogTitle>
        </DialogHeader>

        <div className="space-y-4">
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <label className="text-sm font-medium">æ ‡é¢˜</label>
              <Button
                variant="ghost"
                size="sm"
                onClick={handleAIImprove}
                disabled={!description}
              >
                <Sparkles className="h-3 w-3 mr-1" />
                AI ä¼˜åŒ–
              </Button>
            </div>
            <Input
              value={title}
              onChange={(e) => setTitle(e.target.value)}
              placeholder="éœ€æ±‚æ ‡é¢˜"
            />
          </div>

          <div className="space-y-2">
            <label className="text-sm font-medium">æè¿°</label>
            <Textarea
              value={description}
              onChange={(e) => setDescription(e.target.value)}
              placeholder="è¯¦ç»†æè¿°..."
              rows={6}
            />
          </div>

          <div className="flex gap-4">
            <div className="flex-1">
              <label className="text-sm font-medium">çŠ¶æ€</label>
              <Select value={status} onValueChange={setStatus}>
                <SelectTrigger><SelectValue /></SelectTrigger>
                <SelectContent>
                  <SelectItem value="BACKLOG">å¾…åŠ</SelectItem>
                  <SelectItem value="TODO">å¾…å¤„ç†</SelectItem>
                  <SelectItem value="IN_PROGRESS">è¿›è¡Œä¸­</SelectItem>
                  <SelectItem value="DONE">å·²å®Œæˆ</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div className="flex-1">
              <label className="text-sm font-medium">ä¼˜å…ˆçº§</label>
              <Select value={priority} onValueChange={setPriority}>
                <SelectTrigger><SelectValue /></SelectTrigger>
                <SelectContent>
                  <SelectItem value="URGENT">ç´§æ€¥</SelectItem>
                  <SelectItem value="HIGH">é«˜</SelectItem>
                  <SelectItem value="MEDIUM">ä¸­</SelectItem>
                  <SelectItem value="LOW">ä½</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>

          <div className="flex justify-end gap-2">
            <Button variant="outline" onClick={() => onOpenChange(false)}>
              å–æ¶ˆ
            </Button>
            <Button onClick={handleSave} disabled={loading}>
              ä¿å­˜æ›´æ”¹
            </Button>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  );
}
```

---

### 3.6 å…¨å±€å¿«æ·é”®

**æ–‡ä»¶ï¼š`src/components/GlobalHotkeys.tsx`**

```typescript
'use client';

import { useHotkeys } from 'react-hotkeys-hook';
import { useRouter } from 'next/navigation';
import { useEffect, useState } from 'react';
import { QuickEditDialog } from './requirements/QuickEditDialog';
import { CommandPalette } from './command/CommandPalette';

export function GlobalHotkeys({ requirements }: { requirements: Requirement[] }) {
  const router = useRouter();
  const [editDialog, setEditDialog] = useState<{ requirement: Requirement; open: boolean }>({
    requirement: null,
    open: false,
  });

  // C: åˆ›å»ºæ–°éœ€æ±‚
  useHotkeys('c', () => {
    router.push('/requirements/new');
  });

  // /: èšç„¦æœç´¢
  useHotkeys('/', (e) => {
    e.preventDefault();
    document.querySelector('input[placeholder*="æœç´¢"]')?.querySelector('input')?.focus();
  });

  // E: ç¼–è¾‘ç¬¬ä¸€ä¸ªéœ€æ±‚
  useHotkeys('e', () => {
    if (requirements.length > 0) {
      setEditDialog({ requirement: requirements[0], open: true });
    }
  });

  return (
    <>
      <CommandPalette />
      {editDialog.requirement && (
        <QuickEditDialog
          requirement={editDialog.requirement}
          open={editDialog.open}
          onOpenChange={(open) => setEditDialog({ ...editDialog, open })}
          onSave={async (data) => {
            await fetch(`/api/requirements/${editDialog.requirement.id}`, {
              method: 'PUT',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(data),
            });
          }}
        />
      )}
    </>
  );
}
```

---

## å››ã€æ–‡ä»¶å˜æ›´æ¸…å•

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|----------|------|--------|
| `src/stores/workspaceStore.ts` | å·¥ä½œç©ºé—´çŠ¶æ€ç®¡ç† | P0 |
| `src/components/workspaces/WorkspaceSwitcher.tsx` | ç©ºé—´åˆ‡æ¢å™¨ | P0 |
| `src/components/workspaces/WorkspaceHotkeys.tsx` | å¿«æ·é”®æ”¯æŒ | P1 |
| `src/lib/ai/deepseek-client.ts` | DeepSeek API å®¢æˆ·ç«¯ | P0 |
| `src/lib/ai/cache.ts` | AI å“åº”ç¼“å­˜ | P1 |
| `src/components/requirements/DraggableBoard.tsx` | æ‹–æ‹½çœ‹æ¿ | P0 |
| `src/components/requirements/DraggableColumn.tsx` | å¯æ‹–æ‹½åˆ— | P0 |
| `src/components/requirements/DraggableRequirementCard.tsx` | å¯æ‹–æ‹½å¡ç‰‡ | P0 |
| `src/components/requirements/QuickEditDialog.tsx` | å¿«é€Ÿç¼–è¾‘ | P1 |
| `src/components/command/CommandPalette.tsx` | å‘½ä»¤é¢æ¿ | P1 |
| `src/components/GlobalHotkeys.tsx` | å…¨å±€å¿«æ·é”® | P1 |
| `src/app/api/workspaces/[id]/visit/route.ts` | è®¿é—®è®°å½• | P0 |
| `src/app/api/ai/suggest-title/route.ts` | AI æ ‡é¢˜å»ºè®® | P1 |
| `src/lib/templates/requirement-templates.ts` | éœ€æ±‚æ¨¡æ¿ | P2 |
| `src/components/requirements/VoiceInput.tsx` | è¯­éŸ³è¾“å…¥ | P2 |
| `src/app/api/requirements/import/route.ts` | æ‰¹é‡å¯¼å…¥ | P2 |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | å˜æ›´å†…å®¹ |
|----------|----------|
| `src/app/(dashboard)/layout.tsx` | é›†æˆ WorkspaceSwitcherã€ç§»é™¤ç¡¬ç¼–ç é€»è¾‘ |
| `src/app/api/ai/parse-requirement/route.ts` | å‡çº§ä¸º DeepSeek AI |
| `src/app/api/workspaces/route.ts` | æ·»åŠ  lastVisitedAt æ’åº |
| `src/components/requirements/RequirementBoard.tsx` | æ›¿æ¢ä¸º DraggableBoard |
| `src/components/requirements/RequirementCard.tsx` | æ·»åŠ ç‚¹å‡»ç¼–è¾‘ |
| `prisma/schema.prisma` | æ·»åŠ  lastVisitedAtã€order å­—æ®µ |
| `package.json` | æ·»åŠ æ–°ä¾èµ– |
| `.env.local` | æ·»åŠ  DEEPSEEK_API_KEY |
| `tailwind.config.ts` | æ·»åŠ æ‹–æ‹½ç›¸å…³åŠ¨ç”» |

---

## äº”ã€å®æ–½æ£€æŸ¥æ¸…å•

### ç¬¬ä¸€å‘¨ï¼šçŠ¶æ€ç®¡ç† + ç©ºé—´åˆ‡æ¢
- [ ] å®‰è£… zustand
- [ ] åˆ›å»º workspaceStore
- [ ] å®ç° WorkspaceSwitcher ç»„ä»¶
- [ ] åˆ›å»º /api/workspaces/[id]/visit API
- [ ] æ›´æ–° layout.tsx é›†æˆåˆ‡æ¢å™¨
- [ ] æ·»åŠ æ•°æ®åº“ lastVisitedAt å­—æ®µ
- [ ] æµ‹è¯•ç©ºé—´åˆ‡æ¢åŠŸèƒ½

### ç¬¬äºŒå‘¨ï¼šAI + æ‹–æ‹½
- [ ] å®‰è£… @dnd-kitã€openaiï¼ˆDeepSeek å…¼å®¹ï¼‰
- [ ] å®ç° DeepSeek å®¢æˆ·ç«¯
- [ ] å‡çº§ /api/ai/parse-requirement
- [ ] å®ç° DraggableBoard ç»„ä»¶
- [ ] å®ç° DraggableColumn å’Œå¡ç‰‡
- [ ] æ›´æ–°çœ‹æ¿é¡µé¢ä½¿ç”¨æ–°ç»„ä»¶
- [ ] æµ‹è¯•æ‹–æ‹½åŠŸèƒ½

### ç¬¬ä¸‰å‘¨ï¼šä½“éªŒå¢å¼º
- [ ] å®‰è£… cmdkã€react-hotkeys-hook
- [ ] å®ç° CommandPalette (âŒ˜K)
- [ ] å®ç° QuickEditDialog
- [ ] å®ç° AI æ ‡é¢˜ä¼˜åŒ– API
- [ ] æ·»åŠ å…¨å±€å¿«æ·é”®
- [ ] ç”¨æˆ·æµ‹è¯•å’Œåé¦ˆ

### ç¬¬å››å‘¨ï¼šé«˜çº§åŠŸèƒ½
- [ ] å®ç°éœ€æ±‚æ¨¡æ¿ç³»ç»Ÿ
- [ ] æ·»åŠ è¯­éŸ³è¾“å…¥
- [ ] å®ç°æ‰¹é‡å¯¼å…¥ API
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜
- [ ] æ–‡æ¡£å’Œéƒ¨ç½²

---

## å…­ã€é¢„æœŸæ•ˆæœ

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | æå‡ |
|------|------|------|------|
| ç©ºé—´åˆ‡æ¢æ—¶é—´ | >5ç§’ | <1ç§’ | 80%â†“ |
| éœ€æ±‚åˆ›å»ºæ—¶é—´ | 3åˆ†é’Ÿ | 30ç§’ | 83%â†“ |
| çŠ¶æ€æ›´æ–°æ—¶é—´ | 5ç§’ | 1ç§’ | 80%â†“ |
| æ‰‹åŠ¨è¾“å…¥é‡ | 100% | 20% | 80%â†“ |

---

## ä¸ƒã€æˆæœ¬ä¼°ç®—

**DeepSeek API æˆæœ¬**ï¼ˆ2025å¹´å®šä»·ï¼‰ï¼š
- **deepseek-chat**: Â¥1 / ç™¾ä¸‡ input tokens, Â¥2 / ç™¾ä¸‡ output tokens
- è§£æéœ€æ±‚ï¼š~100 tokens/æ¬¡
- æ ‡é¢˜å»ºè®®ï¼š~50 tokens/æ¬¡
- 1000 æ¬¡è¯·æ±‚ â‰ˆ Â¥0.001ï¼ˆçº¦ $0.00015ï¼‰
- æœˆæˆæœ¬ï¼ˆ1000ç”¨æˆ·ï¼‰â‰ˆ **Â¥1-5**ï¼ˆçº¦ $0.15-0.75ï¼‰

**ä¸ OpenAI å¯¹æ¯”**ï¼š
| é¡¹ç›® | DeepSeek | OpenAI (GPT-4o-mini) |
|------|----------|---------------------|
| Input ä»·æ ¼ | Â¥1/ç™¾ä¸‡ tokens | $0.15/ç™¾ä¸‡ tokens |
| Output ä»·æ ¼ | Â¥2/ç™¾ä¸‡ tokens | $0.60/ç™¾ä¸‡ tokens |
| æœˆæˆæœ¬ï¼ˆ1000ç”¨æˆ·ï¼‰ | Â¥1-5 | $15-50 |
| æˆæœ¬ä¼˜åŠ¿ | **95%+ æ›´ä¾¿å®œ** | åŸºå‡† |

**ä¼˜åŒ–ç­–ç•¥**ï¼š
- ä½¿ç”¨ 30 åˆ†é’Ÿ LRU ç¼“å­˜
- é™åˆ¶è¯·æ±‚é¢‘ç‡ï¼š10æ¬¡/åˆ†é’Ÿ
- DeepSeek V3 æ¨¡å‹æ”¯æŒ 128K ä¸Šä¸‹æ–‡ï¼Œé€‚åˆæ‰¹é‡æ“ä½œ

**è·å– API Key**ï¼š
1. è®¿é—® https://platform.deepseek.com/
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. è¿›å…¥ API Keys é¡µé¢åˆ›å»ºå¯†é’¥
4. æ–°ç”¨æˆ·èµ é€ä¸€å®šé¢åº¦ä¾›æµ‹è¯•

---

## å…«ã€UI/UX è®¾è®¡è¦ç‚¹

### 8.1 å·¥ä½œç©ºé—´åˆ‡æ¢å™¨è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [äº§å“ç ”å‘å·¥ä½œåŒº â–¾]              â”‚  â† ç‚¹å‡»å±•å¼€
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ” æœç´¢å·¥ä½œç©ºé—´...         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ• æœ€è¿‘ä½¿ç”¨                â”‚  â”‚
â”‚  â”‚   Â· äº§å“ç ”å‘å·¥ä½œåŒº âœ“       â”‚  â”‚
â”‚  â”‚   Â· å¸‚åœºè¥é”€å›¢é˜Ÿ (3æœªè¯»)   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ æˆ‘çš„å·¥ä½œç©ºé—´                â”‚  â”‚
â”‚  â”‚   Â· è®¾è®¡ç³»ç»Ÿå§”å‘˜ä¼š         â”‚  â”‚
â”‚  â”‚   Â· æŠ€æœ¯åŸºç¡€è®¾æ–½ç»„         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚     [+ æ–°å»ºå·¥ä½œç©ºé—´]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 å‘½ä»¤é¢æ¿è®¾è®¡ (âŒ˜K)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” æœç´¢å‘½ä»¤ã€éœ€æ±‚ã€å·¥ä½œç©ºé—´...       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                     â”‚
â”‚  âŸ³ æœ€è¿‘ä½¿ç”¨                          â”‚
â”‚    Â· åˆ›å»ºæ–°éœ€æ±‚            âŒ˜N       â”‚
â”‚    Â· åˆ‡æ¢å·¥ä½œç©ºé—´                    â”‚
â”‚                                     â”‚
â”‚  ğŸ“‚ å·¥ä½œç©ºé—´                         â”‚
â”‚    Â· äº§å“ç ”å‘å·¥ä½œåŒº      [å½“å‰]      â”‚
â”‚    Â· å¸‚åœºè¥é”€å›¢é˜Ÿ                   â”‚
â”‚                                     â”‚
â”‚  âš¡ å¿«é€Ÿæ“ä½œ                         â”‚
â”‚    Â· åˆ›å»ºéœ€æ±‚                        â”‚
â”‚    Â· æ‰“å¼€è®¾ç½®                        â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â†‘â†“ é€‰æ‹© Â· ESC å…³é—­ Â· Enter æ‰§è¡Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 å¿«é€Ÿç¼–è¾‘å¯¹è¯æ¡†è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¿«é€Ÿç¼–è¾‘éœ€æ±‚                     [âœ•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  æ ‡é¢˜                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ä¿®å¤ç™»å½•é¡µé¢åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºé—®é¢˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         [AI ä¼˜åŒ– âœ¨]   â”‚
â”‚                                         â”‚
â”‚  æè¿°                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç”¨æˆ·åé¦ˆåœ¨ iPhone SE ä¸Šç™»å½•æŒ‰é’®... â”‚ â”‚
â”‚  â”‚                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  çŠ¶æ€: [å¾…å¤„ç† â–¾]  ä¼˜å…ˆçº§: [é«˜ â–¾]      â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  å–æ¶ˆ     â”‚  â”‚ ä¿å­˜æ›´æ”¹  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.4 æ‹–æ‹½çœ‹æ¿è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¾…åŠ (3)    â”‚  â”‚  è¿›è¡Œä¸­ (2)  â”‚  â”‚  å·²å®Œæˆ (5)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ REQ-004 â”‚ â”‚  â”‚ â”‚ REQ-001 â”‚ â”‚  â”‚ â”‚ REQ-005 â”‚ â”‚
â”‚ â”‚ ä¿®å¤... â”‚ â”‚  â”‚ â”‚ æ·»åŠ ... â”‚ â”‚  â”‚ â”‚ ä¼˜åŒ–... â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ REQ-006 â”‚ â”‚  â”‚ â”‚ REQ-002 â”‚ â”‚  â”‚ â”‚ REQ-007 â”‚ â”‚
â”‚ â”‚ æ›´æ–°... â”‚ â”‚  â”‚ â”‚ ç”¨æˆ·... â”‚ â”‚  â”‚ â”‚ ä¿®å¤... â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚  â”‚      â†“      â”‚  â”‚             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  (æ‹–æ”¾åŒº)   â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ REQ-008 â”‚ â”‚  â”‚            â”‚  â”‚ â”‚ REQ-009 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¹ã€å¿«æ·é”®ä¸€è§ˆ

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| âŒ˜K / Ctrl+K | æ‰“å¼€å‘½ä»¤é¢æ¿ |
| C | åˆ›å»ºæ–°éœ€æ±‚ |
| E | ç¼–è¾‘ç¬¬ä¸€ä¸ªéœ€æ±‚ |
| / | èšç„¦æœç´¢æ¡† |
| ESC | å…³é—­å¯¹è¯æ¡† |
| âŒ˜1-4 | åˆ‡æ¢åˆ°æœ€è¿‘å·¥ä½œç©ºé—´ |

---

*æœ¬æ–¹æ¡ˆåŸºäº fast-json é¡¹ç›®çš„å®é™…ä»£ç åˆ†æåˆ¶å®šï¼Œæ‰€æœ‰æ–‡ä»¶è·¯å¾„å’Œä»£ç ç‰‡æ®µå‡é’ˆå¯¹å½“å‰é¡¹ç›®ç»“æ„ã€‚AI é›†æˆä½¿ç”¨ DeepSeek APIï¼Œå…¼å®¹ OpenAI SDKï¼Œæˆæœ¬é™ä½ 95%+ã€‚*
